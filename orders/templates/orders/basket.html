{% extends "core/base.html" %}
{% load static %}
{% load order_extras %}

{% block title %}Basket{% endblock %}

{% block content %}
<header>
    <div class="navbar">
        <span class="menu-icon" onclick="openMenu()">&#9776;</span>
        <img src="{% static 'core/images/logo.png' %}" alt="V Planner Logo" class="logo">
    </div>
</header>
<main>
    <h2 class="welcome-title">Your Basket</h2>
    {% if items %}
    <table border="1">
        <tr>
            <th>Item</th>
            <th>Service</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Subtotal</th>
        </tr>
        {% for item in items %}
        <tr>
            <td>{{ item.item.title }}</td>
            <td>{{ item.service.title }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.price_amount_at_order }} {{ item.price_currency_at_order }}</td>
            <td>{{ item.quantity|multiply:item.price_amount_at_order|floatformat:2 }} {{ item.price_currency_at_order }}</td>
        </tr>
        {% endfor %}
        <tr>
            <td colspan="4" style="text-align:right;"><strong>Total:</strong></td>
            <td><strong>{{ total|floatformat:2 }} {{ items.0.price_currency_at_order }}</strong></td>
        </tr>
    </table>
    {% else %}
        <p>Your basket is empty.</p>
    {% endif %}
</main>
{% endblock %}